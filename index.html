<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Language" content="en-US">
    <title>STAC Search Viewer</title>
    <link rel="stylesheet" href="./style.css">
</head>
<body>
    <div id="app">
        <!-- Header Section -->
        <header class="header">
            <h1>STAC Items Search Viewer</h1>
            <div class="header-subline">
                <p>Search and visualize STAC items</p>
                <a class="author-link" href="https://github.com/Junhao2314" target="_blank" rel="noopener noreferrer" title="Liu Junhao on GitHub">
                    <svg class="gh-icon" viewBox="0 0 16 16" aria-hidden="true" focusable="false" fill="currentColor">
                        <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27s1.36.09 2 .27c1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.28.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0016 8c0-4.42-3.58-8-8-8z"/>
                    </svg>
                    <span>by Liu Junhao</span>
                </a>
            </div>
        </header>

        <!-- Main Container -->
        <div class="main-container">
            <!-- Left Panel - Search Controls -->
            <aside class="search-panel">
                <h2>Search Parameters</h2>
                
                <div class="form-group">
                    <label for="provider">Provider:</label>
                    <select id="provider">
                        <option value="planetary-computer">Microsoft Planetary Computer</option>
                        <option value="earth-search">AWS Earth Search</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="collection">Collection:</label>
                    <div class="collection-picker">
                        <input type="hidden" id="collection" value="">
                        <button id="open-collection-picker" class="secondary-btn" type="button" title="Select a collection">Select Collection</button>
                    </div>
                </div>

                <div class="form-group">
                    <label for="datetime">Date Range:</label>
                    <div class="date-range">
                        <input type="date" id="date-from" title="Start date" lang="en-US" placeholder="mm/dd/yyyy">
                        <span class="date-separator">â€“</span>
                        <input type="date" id="date-to" title="End date" lang="en-US" placeholder="mm/dd/yyyy">
                    </div>
                </div>

                <div class="form-group">
                    <label for="bbox">Bounding Box:</label>
                    <div class="bbox-inputs">
                        <div class="bbox-field">
                            <input type="number" id="bbox-west" placeholder="West" step="0.001">
                            <select id="bbox-west-hem" title="Longitude hemisphere">
                                <option value="E" selected>E</option>
                                <option value="W">W</option>
                            </select>
                        </div>
                        <div class="bbox-field">
                            <input type="number" id="bbox-south" placeholder="South" step="0.001">
                            <select id="bbox-south-hem" title="Latitude hemisphere">
                                <option value="N" selected>N</option>
                                <option value="S">S</option>
                            </select>
                        </div>
                        <div class="bbox-field">
                            <input type="number" id="bbox-east" placeholder="East" step="0.001">
                            <select id="bbox-east-hem" title="Longitude hemisphere">
                                <option value="E" selected>E</option>
                                <option value="W">W</option>
                            </select>
                        </div>
                        <div class="bbox-field">
                            <input type="number" id="bbox-north" placeholder="North" step="0.001">
                            <select id="bbox-north-hem" title="Latitude hemisphere">
                                <option value="N" selected>N</option>
                                <option value="S">S</option>
                            </select>
                        </div>
                    </div>
                    <button id="draw-bbox" class="secondary-btn">Draw on Map</button>
                </div>

                <div class="form-group">
                    <label for="limit">Max Results:</label>
                    <input type="number" id="limit" value="10" min="1" max="100">
                </div>

                <button id="search-btn" class="primary-btn">Apply Search</button>
            </aside>

            <!-- Center - Map View -->
            <main class="map-container">
                <div id="map"></div>
                <!-- Drawing Tools Toolbar -->
                <div class="map-toolbar drawing-tools">
                    <button id="toggle-drawing-tools" class="tool-btn" title="Toggle Drawing Tools">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="15 18 9 12 15 6"></polyline>
                        </svg>
                    </button>
                    <div class="drawing-tools-content">
                        <button id="draw-polygon" class="tool-btn" title="Draw Polygon">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <polygon points="5 5 19 8 16 19 6 16" />
                            </svg>
                        </button>
                        <button id="draw-rectangle" class="tool-btn" title="Draw Rectangle">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <rect x="4" y="6" width="16" height="12" rx="1" ry="1"></rect>
                            </svg>
                        </button>
                        <button id="clear-drawing" class="tool-btn" title="Clear Drawing">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M3 6h18M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                            </svg>
                        </button>
                    </div>
                </div>
                
                <!-- Navigation Controls -->
                <div class="map-controls">
                    <button id="zoom-in" class="nav-btn" title="Zoom In">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"></circle>
                            <line x1="12" y1="8" x2="12" y2="16"></line>
                            <line x1="8" y1="12" x2="16" y2="12"></line>
                        </svg>
                    </button>
                    <button id="zoom-out" class="nav-btn" title="Zoom Out">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"></circle>
                            <line x1="8" y1="12" x2="16" y2="12"></line>
                        </svg>
                    </button>
                    <button id="reset-view" class="nav-btn" title="Home">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                            <polyline points="9 22 9 12 15 12 15 22"></polyline>
                        </svg>
                    </button>
                </div>

                <!-- Basemap Switcher -->
                <div class="map-basemap">
                    <select id="basemap-select" title="Basemap selection">
                        <option value="osm">OpenStreetMap</option>
<option value="esri_img">Esri World Imagery (EN labels)</option>
                        <option value="google_hyb">Google Hybrid</option>
                        <option value="google_road">Google Road</option>
                    </select>
                </div>
            </main>

            <!-- Right Panel - Results -->
            <aside class="results-panel">
                <h2>Search Results</h2>
                <div id="results-count"></div>
                <div id="results-list"></div>
            </aside>
        </div>

        <!-- Item Detail Modal -->
        <div id="item-modal" class="modal">
            <div class="modal-content">
                <span class="close">&times;</span>
                <h2>Item Details</h2>
                <div id="item-details"></div>
            </div>
        </div>

        <!-- Collection Picker Modal -->
        <div id="collection-modal" class="modal">
            <div class="modal-content">
                <span class="close">&times;</span>
                <h2>Select Collection</h2>
                <div id="collection-list" class="collection-list">
                    <div class="collection-search-row">
                        <input id="collection-search" type="text" placeholder="Search collections by ID, title, keywords" />
                    </div>
                    <div id="collection-grid" class="collection-grid"></div>
                    <div id="collection-pagination" class="collection-pagination"></div>
                </div>
                <div id="collection-detail" class="collection-detail hidden"></div>
            </div>
        </div>
    </div>

    <script type="module" src="./main.js"></script>
</body>
</html>
